"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.fileExists = exports.readBinarySafe = exports.readFileSafe = exports.writeFileSafe = exports.ensureDir = void 0;
const fs_1 = require("fs");
const path_1 = __importDefault(require("path"));
const ensureDir = async (dirPath) => {
    await fs_1.promises.mkdir(dirPath, { recursive: true });
};
exports.ensureDir = ensureDir;
const writeFileSafe = async (filePath, data, encoding = undefined) => {
    await (0, exports.ensureDir)(path_1.default.dirname(filePath));
    if (typeof data === 'string') {
        await fs_1.promises.writeFile(filePath, data, encoding);
    }
    else {
        await fs_1.promises.writeFile(filePath, data);
    }
};
exports.writeFileSafe = writeFileSafe;
const readFileSafe = async (filePath, encoding = 'utf-8') => {
    try {
        return await fs_1.promises.readFile(filePath, encoding);
    }
    catch {
        return undefined;
    }
};
exports.readFileSafe = readFileSafe;
const readBinarySafe = async (filePath) => {
    try {
        return await fs_1.promises.readFile(filePath);
    }
    catch {
        return undefined;
    }
};
exports.readBinarySafe = readBinarySafe;
const fileExists = async (filePath) => {
    try {
        await fs_1.promises.access(filePath);
        return true;
    }
    catch {
        return false;
    }
};
exports.fileExists = fileExists;
//# sourceMappingURL=fs.js.map